<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>рд╡рд░реНрдЧрдореВрд▓ рдПрд╡рдВ рдШрдирдореВрд▓ тАУ рдореЙрдХ рдЯреЗрд╕реНрдЯ 2</title>
<style>
  :root{--primary:#0b73ff;--bg:#f5f7fb;--card:#ffffff;--text:#222;--muted:#666;--success:#1aa65b;--danger:#e03b3b}
  *{box-sizing:border-box} body{margin:0;font-family:system-ui,Arial,sans-serif;background:var(--bg);color:var(--text)}
  header{background:#111;color:#fff;padding:14px 16px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px}
  header h1{margin:0;font-size:18px}
  .timer{background:#fff;color:#111;padding:6px 10px;border-radius:8px;font-weight:700}
  .container{max-width:900px;margin:18px auto;padding:0 14px}
  .card{background:var(--card);border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,.08);padding:18px;margin-bottom:16px}
  .q-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
  .q-index{font-weight:700;color:var(--primary)} .q-text{font-size:18px;line-height:1.5}
  .options{margin-top:12px;display:grid;gap:10px}
  .opt{border:1px solid #e6e8ef;border-radius:10px;padding:12px;cursor:pointer;transition:.2s;background:#fff}
  .opt:hover{border-color:var(--primary);box-shadow:0 3px 10px rgba(11,115,255,.12)}
  .opt.selected{outline:2px solid var(--primary);background:#f0f6ff}
  .nav{display:flex;gap:10px;justify-content:space-between;flex-wrap:wrap;margin-top:12px}
  button{background:var(--primary);color:#fff;border:none;border-radius:10px;padding:10px 14px;cursor:pointer;font-weight:700}
  button[disabled]{opacity:.6;cursor:not-allowed} .ghost{background:#eef3ff;color:#0b3b99} .success{background:var(--success)}
  .pill{display:inline-block;background:#eef3ff;color:#0b3b99;padding:4px 8px;border-radius:999px;font-size:12px}
  .meta{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  .result{padding:16px;border-left:6px solid var(--primary)}
  .kpi{display:flex;gap:12px;flex-wrap:wrap}
  .kpi .chip{background:#f2f4f9;border-radius:10px;padding:10px 12px;min-width:120px}
  .review .item{border:1px solid #eceff5;border-radius:12px;padding:14px;margin-bottom:12px}
  .ans{margin-top:8px;font-size:14px} .correct{color:var(--success);font-weight:700} .wrong{color:var(--danger);font-weight:700}
  details{margin-top:8px;background:#fbfcff;border:1px dashed #dfe6fb;border-radius:10px;padding:8px 10px}
  summary{cursor:pointer;font-weight:600} .footer-note{color:var(--muted);font-size:13px;margin-top:8px}
</style>
</head>
<body>
<header>
  <h1>рд╡рд░реНрдЧрдореВрд▓ рдПрд╡рдВ рдШрдирдореВрд▓ (Roots) тАФ рдореЙрдХ рдЯреЗрд╕реНрдЯ 2</h1>
  <div class="meta">
    <span class="pill">25 рдкреНрд░рд╢реНрди</span>
    <span class="pill">35 рдорд┐рдирдЯ</span>
    <div id="timer" class="timer">35:00</div>
  </div>
</header>

<div class="container">
  <div id="quizCard" class="card">
    <div class="q-header">
      <div class="q-index">рдкреНрд░рд╢реНрди <span id="qNo">1</span> / <span id="qTotal">25</span></div>
      <div class="pill" id="progressPill">рдкреНрд░рдпрд╛рд╕рд┐рдд: 0</div>
    </div>
    <div id="qText" class="q-text"></div>
    <div id="options" class="options"></div>

    <div class="nav">
      <div>
        <button id="prevBtn" class="ghost">тмЕя╕П рдкрд┐рдЫрд▓рд╛</button>
        <button id="nextBtn">рдЕрдЧрд▓рд╛ тЮбя╕П</button>
      </div>
      <div>
        <button id="clearBtn" class="ghost">рдЪрдпрди рд╣рдЯрд╛рдПрдВ</button>
        <button id="submitBtn" class="success">тЬЕ рдЬрдорд╛ рдХрд░реЗрдВ</button>
      </div>
    </div>
    <div class="footer-note">рдЬрдорд╛ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдЬрд╡рд╛рдм рдмрджрд▓реЗ рдирд╣реАрдВ рдЬрд╛ рд╕рдХреЗрдВрдЧреЗред рдЯрд╛рдЗрдорд░ 0 рд╣реЛрдиреЗ рдкрд░ рдЯреЗрд╕реНрдЯ рд╕реНрд╡рддрдГ рдЬрдорд╛ рд╣реЛ рдЬрд╛рдПрдЧрд╛ред</div>
  </div>

  <div id="resultCard" class="card" style="display:none">
    <h2 style="margin:0 0 8px">ЁЯУК рдкрд░рд┐рдгрд╛рдо</h2>
    <div id="scoreLine" class="result"></div>
    <div class="kpi" style="margin-top:12px">
      <div class="chip">тЬЕ рд╕рд╣реА: <b id="correctCount">0</b></div>
      <div class="chip">тЭМ рдЧрд▓рдд: <b id="wrongCount">0</b></div>
      <div class="chip">тП│ рдЕрдиреБрддреНрддрд░рд┐рдд: <b id="unattCount">0</b></div>
      <div class="chip">ЁЯОп рд╕реНрдХреЛрд░ (%): <b id="scorePct">0</b></div>
      <div class="chip">тМЫ рд▓рд┐рдпрд╛ рдЧрдпрд╛ рд╕рдордп: <b id="timeUsed">0:00</b></div>
    </div>
  </div>

  <div id="reviewCard" class="card review" style="display:none">
    <h2 style="margin:0 0 8px">ЁЯУЭ рдЙрддреНрддрд░ рд╕рдореАрдХреНрд╖рд╛ + рд╡рд┐рд╕реНрддреГрдд рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг</h2>
    <div id="reviewList"></div>
  </div>
</div>

<script>
/* ===================== QUESTIONS (25) ===================== */
const questions = [
  { q:"$\sqrt{361}$ рдХрд╛ рдорд╛рди рдХреНрдпрд╛ рд╣реЛрдЧрд╛?", options:["19", "21", "29", "31"],
    answerIndex:0, explanation:"рд╣рдо рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ $10^2=100$ рдФрд░ $20^2=400$ред 361 рдХрд╛ рдЗрдХрд╛рдИ рдЕрдВрдХ 1 рд╣реИ, рдЬреЛ $1^2$ рдпрд╛ $9^2$ рд╕реЗ рдЖрддрд╛ рд╣реИред рдЪреВрдБрдХрд┐ 361, 400 рдХреЗ рдХрд░реАрдм рд╣реИ, рдЗрд╕рдХрд╛ рд╡рд░реНрдЧрдореВрд▓ 19 рд╣реИред"},
  { q:"$\sqrt{156.25}$ рдХрд╛ рдорд╛рди рдХреНрдпрд╛ рд╣реЛрдЧрд╛?", options:["1.25", "12.5", "1.5", "125"],
    answerIndex:1, explanation:"$15625$ рдХрд╛ рд╡рд░реНрдЧрдореВрд▓ $125$ рд╣реЛрддрд╛ рд╣реИред рджрд╢рдорд▓рд╡ рдХреЗ рдмрд╛рдж 2 рдЕрдВрдХ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рд╡рд░реНрдЧрдореВрд▓ рдореЗрдВ рджрд╢рдорд▓рд╡ рдХреЗ рдмрд╛рдж 1 рдЕрдВрдХ рд╣реЛрдЧрд╛ред рдЕрддрдГ, $\sqrt{156.25} = 12.5$ред"},
  { q:"$\sqrt[3]{2197}$ рдХрд╛ рдорд╛рди рдХреНрдпрд╛ рд╣реИ?", options:["13", "17", "23", "27"],
    answerIndex:0, explanation:"рдЗрдХрд╛рдИ рдЕрдВрдХ 7 рд╣реИ, рдЬреЛ $3^3 = 27$ рд╕реЗ рдЖрддрд╛ рд╣реИред рдЗрд╕рд▓рд┐рдП, рдШрдирдореВрд▓ рдХрд╛ рдЗрдХрд╛рдИ рдЕрдВрдХ 3 рд╣реЛрдЧрд╛ред $10^3 = 1000$ рдФрд░ $20^3=8000$ рдХреЗ рдмреАрдЪ рдореЗрдВ 2197 рд╣реИред рдЗрд╕рд▓рд┐рдП рдЗрд╕рдХрд╛ рдШрдирдореВрд▓ 13 рд╣реИред"},
  { q:"$\frac{\sqrt{2.89}}{\sqrt{1.21}}$ рдХрд╛ рдорд╛рди рдЬреНрдЮрд╛рдд рдХреАрдЬрд┐рдПред", options:["1.7/1.1", "17/11", "11/17", "1.1/1.7"],
    answerIndex:1, explanation:"$\sqrt{2.89} = 1.7$ рдФрд░ $\sqrt{1.21} = 1.1$ред рдЕрддрдГ, $\frac{1.7}{1.1} = \frac{17}{11}$ред"},
  { q:"$(\sqrt{2} + \sqrt{18})^2$ рдХрд╛ рдорд╛рди рдХреНрдпрд╛ рд╣реЛрдЧрд╛?", options:["20", "28", "32", "38"],
    answerIndex:2, explanation:"$\sqrt{18} = \sqrt{9 \times 2} = 3\sqrt{2}$ред\n$(\sqrt{2} + 3\sqrt{2})^2 = (4\sqrt{2})^2 = 4^2 \times (\sqrt{2})^2 = 16 \times 2 = 32$ред"},
  { q:"$\frac{1}{\sqrt{5}+\sqrt{3}}$ рдХрд╛ рдкрд░рд┐рдореЗрдпрдХрд░рдг рдХрд░рдиреЗ рдкрд░ рдХреНрдпрд╛ рдорд╛рди рд╣реЛрдЧрд╛?", options:["$\frac{\sqrt{5}-\sqrt{3}}{2}$", "$\sqrt{5}-\sqrt{3}$", "$\frac{\sqrt{5}+\sqrt{3}}{2}$", "$\frac{2}{\sqrt{5}-\sqrt{3}}$"],
    answerIndex:0, explanation:"$\frac{1}{\sqrt{5}+\sqrt{3}} \times \frac{\sqrt{5}-\sqrt{3}}{\sqrt{5}-\sqrt{3}} = \frac{\sqrt{5}-\sqrt{3}}{(\sqrt{5})^2-(\sqrt{3})^2} = \frac{\sqrt{5}-\sqrt{3}}{5-3} = \frac{\sqrt{5}-\sqrt{3}}{2}$ред"},
  { q:"$\sqrt{12+\sqrt{12+\sqrt{12+...}}}$ рдХрд╛ рдорд╛рди рдХреНрдпрд╛ рд╣реИ?", options:["3", "4", "5", "6"],
    answerIndex:1, explanation:"рдорд╛рдирд╛ $x = \sqrt{12+\sqrt{12+\sqrt{12+...}}}$ред рддреЛ $x^2 = 12+x$ред\n$x^2-x-12=0$ред $(x-4)(x+3)=0$ред\nрдЪреВрдВрдХрд┐ рдорд╛рди рдзрдирд╛рддреНрдордХ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рддреЛ $x=4$ред"},
  { q:"рдпрджрд┐ $\sqrt{20.25} = 4.5$, рддреЛ $\sqrt{2025}$ рдХрд╛ рдорд╛рди рдХреНрдпрд╛ рд╣реЛрдЧрд╛?", options:["4.5", "45", "450", "0.45"],
    answerIndex:1, explanation:"$\sqrt{2025} = \sqrt{20.25 \times 100} = \sqrt{20.25} \times \sqrt{100} = 4.5 \times 10 = 45$ред"},
  { q:"$(2\sqrt{2} - 3\sqrt{3}) + (5\sqrt{2} + \sqrt{3})$ рдХрд╛ рдорд╛рди рдХреНрдпрд╛ рд╣реИ?", options:["$7\sqrt{2}-2\sqrt{3}$", "$7\sqrt{2}+2\sqrt{3}$", "$3\sqrt{2}-4\sqrt{3}$", "$3\sqrt{2}+4\sqrt{3}$"],
    answerIndex:0, explanation:"$(2\sqrt{2}+5\sqrt{2}) + (-3\sqrt{3}+\sqrt{3}) = 7\sqrt{2} - 2\sqrt{3}$ред"},
  { q:"$\sqrt{841}$ рдХрд╛ рдорд╛рди рдХреНрдпрд╛ рд╣реЛрдЧрд╛?", options:["21", "29", "31", "39"],
    answerIndex:1, explanation:"рд╣рдо рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ $20^2=400$ рдФрд░ $30^2=900$ред 841 рдХрд╛ рдЗрдХрд╛рдИ рдЕрдВрдХ 1 рд╣реИ, рдЬреЛ $1^2$ рдпрд╛ $9^2$ рд╕реЗ рдЖрддрд╛ рд╣реИред 841, 900 рдХреЗ рдХрд░реАрдм рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЗрд╕рдХрд╛ рд╡рд░реНрдЧрдореВрд▓ 29 рд╣реИред"},
  { q:"$\frac{\sqrt{3}}{\sqrt{12}}$ рдХрд╛ рдорд╛рди рдЬреНрдЮрд╛рдд рдХреАрдЬрд┐рдПред", options:["1/2", "1/4", "3", "4"],
    answerIndex:0, explanation:"$\frac{\sqrt{3}}{\sqrt{12}} = \sqrt{\frac{3}{12}} = \sqrt{\frac{1}{4}} = \frac{1}{2}$ред"},
  { q:"$\sqrt{50} - \sqrt{18}$ рдХрд╛ рдорд╛рди рдХреНрдпрд╛ рд╣реИ?", options:["$2\sqrt{2}$", "$4\sqrt{2}$", "$3\sqrt{2}$", "$\sqrt{32}$"],
    answerIndex:0, explanation:"$\sqrt{50} = \sqrt{25 \times 2} = 5\sqrt{2}$ред $\sqrt{18} = \sqrt{9 \times 2} = 3\sqrt{2}$ред\n$5\sqrt{2} - 3\sqrt{2} = 2\sqrt{2}$ред"},
  { q:"$\sqrt{72} + \sqrt{50}$ рдХрд╛ рдорд╛рди рдХреНрдпрд╛ рд╣реИ?", options:["$10\sqrt{2}$", "$11\sqrt{2}$", "$12\sqrt{2}$", "$13\sqrt{2}$"],
    answerIndex:1, explanation:"$\sqrt{72} = \sqrt{36 \times 2} = 6\sqrt{2}$ред $\sqrt{50} = \sqrt{25 \times 2} = 5\sqrt{2}$ред\n$6\sqrt{2}+5\sqrt{2} = 11\sqrt{2}$ред"},
  { q:"рдпрджрд┐ $\sqrt[3]{x} = 5$, рддреЛ $x$ рдХрд╛ рдорд╛рди рдХреНрдпрд╛ рд╣реЛрдЧрд╛?", options:["15", "25", "125", "625"],
    answerIndex:2, explanation:"$\sqrt[3]{x} = 5$ рддреЛ $x=5^3 = 125$ред"},
  { q:"$\sqrt{169} + \sqrt[3]{1000}$ рдХрд╛ рдорд╛рди рдХреНрдпрд╛ рд╣реИ?", options:["20", "23", "25", "28"],
    answerIndex:1, explanation:"$\sqrt{169}=13$ рдФрд░ $\sqrt[3]{1000}=10$ред рдпреЛрдЧ $= 13+10=23$ред"},
  { q:"$\sqrt{100-36}$ рдХрд╛ рдорд╛рди рдХреНрдпрд╛ рд╣реИ?", options:["8", "10", "6", "64"],
    answerIndex:0, explanation:"$\sqrt{100-36} = \sqrt{64} = 8$ред"},
  { q:"$\sqrt[3]{0.008}$ рдХрд╛ рдорд╛рди рдХреНрдпрд╛ рд╣реЛрдЧрд╛?", options:["0.2", "0.02", "0.002", "2"],
    answerIndex:0, explanation:"$8$ рдХрд╛ рдШрдирдореВрд▓ $2$ рд╣реИред рджрд╢рдорд▓рд╡ рдХреЗ рдмрд╛рдж 3 рдЕрдВрдХ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдШрдирдореВрд▓ рдореЗрдВ рджрд╢рдорд▓рд╡ рдХреЗ рдмрд╛рдж 1 рдЕрдВрдХ рд╣реЛрдЧрд╛ред рдЕрддрдГ, $\sqrt[3]{0.008} = 0.2$ред"},
  { q:"$\frac{1}{\sqrt{7}-\sqrt{5}}$ рдХрд╛ рдорд╛рди рдХреНрдпрд╛ рд╣реИ?", options:["$\sqrt{7}+\sqrt{5}$", "$\frac{\sqrt{7}+\sqrt{5}}{2}$", "$\frac{\sqrt{7}-\sqrt{5}}{2}$", "$\sqrt{7}-\sqrt{5}$"],
    answerIndex:1, explanation:"$\frac{1}{\sqrt{7}-\sqrt{5}} \times \frac{\sqrt{7}+\sqrt{5}}{\sqrt{7}+\sqrt{5}} = \frac{\sqrt{7}+\sqrt{5}}{(\sqrt{7})^2-(\sqrt{5})^2} = \frac{\sqrt{7}+\sqrt{5}}{7-5} = \frac{\sqrt{7}+\sqrt{5}}{2}$ред"},
  { q:"$\sqrt{7} \times \sqrt{28}$ рдХрд╛ рдорд╛рди рдХреНрдпрд╛ рд╣реИ?", options:["7", "14", "21", "28"],
    answerIndex:1, explanation:"$\sqrt{7 \times 28} = \sqrt{7 \times 7 \times 4} = \sqrt{49 \times 4} = 7 \times 2 = 14$ред"},
  { q:"$\sqrt{441}$ рдХрд╛ рдорд╛рди рдХреНрдпрд╛ рд╣реЛрдЧрд╛?", options:["11", "21", "31", "41"],
    answerIndex:1, explanation:"$20^2=400$ рдФрд░ $30^2=900$ред рдЗрдХрд╛рдИ рдЕрдВрдХ 1 рд╣реИ, рдЬреЛ $1^2$ рдпрд╛ $9^2$ рд╕реЗ рдЖрддрд╛ рд╣реИред 441, 400 рдХреЗ рдХрд░реАрдм рд╣реИ, рддреЛ рдЗрд╕рдХрд╛ рд╡рд░реНрдЧрдореВрд▓ 21 рд╣реИред"},
  { q:"$\sqrt{0.000001}$ рдХрд╛ рдорд╛рди рдХреНрдпрд╛ рд╣реЛрдЧрд╛?", options:["0.01", "0.001", "0.0001", "0.1"],
    answerIndex:1, explanation:"$1$ рдХрд╛ рд╡рд░реНрдЧрдореВрд▓ $1$ рд╣реИред рджрд╢рдорд▓рд╡ рдХреЗ рдмрд╛рдж 6 рдЕрдВрдХ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рд╡рд░реНрдЧрдореВрд▓ рдореЗрдВ рджрд╢рдорд▓рд╡ рдХреЗ рдмрд╛рдж 3 рдЕрдВрдХ рд╣реЛрдВрдЧреЗред рдЕрддрдГ, $\sqrt{0.000001} = 0.001$ред"},
  { q:"$\sqrt{9+2\sqrt{20}}$ рдХрд╛ рдорд╛рди рдХреНрдпрд╛ рд╣реЛрдЧрд╛?", options:["$2+\sqrt{5}$", "$3+\sqrt{5}$", "$2\sqrt{5}+1$", "$5+\sqrt{2}$"],
    answerIndex:0, explanation:"рдпрд╣ $(\sqrt{a}+\sqrt{b})^2 = a+b+2\sqrt{ab}$ рдХреЗ рд░реВрдк рдХрд╛ рд╣реИред\nрд╣рдореЗрдВ рдРрд╕реА рджреЛ рд╕рдВрдЦреНрдпрд╛рдПрдБ рдЪрд╛рд╣рд┐рдП рдЬрд┐рдирдХрд╛ рдпреЛрдЧ 9 рд╣реЛ рдФрд░ рдЧреБрдгрдирдлрд▓ 20 рд╣реЛред рд╡реЗ рд╕рдВрдЦреНрдпрд╛рдПрдБ 4 рдФрд░ 5 рд╣реИрдВред\nрдЕрддрдГ, $\sqrt{9+2\sqrt{20}} = \sqrt{(\sqrt{4}+\sqrt{5})^2} = \sqrt{4}+\sqrt{5} = 2+\sqrt{5}$ред"},
  { q:"$\sqrt{196} + \sqrt{225} - \sqrt{256}$ рдХрд╛ рдорд╛рди рдХреНрдпрд╛ рд╣реИ?", options:["11", "12", "13", "14"],
    answerIndex:2, explanation:"$\sqrt{196}=14$, $\sqrt{225}=15$ рдФрд░ $\sqrt{256}=16$ред\n$14+15-16 = 29-16 = 13$ред"},
  { q:"$\frac{1}{\sqrt{3}+1}$ рдХрд╛ рдорд╛рди рдХреНрдпрд╛ рд╣реИ?", options:["$\frac{\sqrt{3}-1}{2}$", "$\sqrt{3}-1$", "$\frac{\sqrt{3}+1}{2}$", "$\sqrt{3}+1$"],
    answerIndex:0, explanation:"$\frac{1}{\sqrt{3}+1} \times \frac{\sqrt{3}-1}{\sqrt{3}-1} = \frac{\sqrt{3}-1}{3-1} = \frac{\sqrt{3}-1}{2}$ред"},
  { q:"$( \frac{\sqrt{16}}{4} )^2$ рдХрд╛ рдорд╛рди рдХреНрдпрд╛ рд╣реИ?", options:["1", "2", "4", "16"],
    answerIndex:0, explanation:"$\frac{\sqrt{16}}{4} = \frac{4}{4} = 1$ред\n$(1)^2 = 1$ред"}
];/* ===================== QUIZ ENGINE ===================== */
const TOTAL_QUESTIONS = questions.length;
const QUIZ_MINUTES = 35;
const qNoEl=document.getElementById('qNo'), qTotalEl=document.getElementById('qTotal');
const qTextEl=document.getElementById('qText'), optionsEl=document.getElementById('options');
const progressPill=document.getElementById('progressPill');
const prevBtn=document.getElementById('prevBtn'), nextBtn=document.getElementById('nextBtn');
const clearBtn=document.getElementById('clearBtn'), submitBtn=document.getElementById('submitBtn');
const timerEl=document.getElementById('timer');
const quizCard=document.getElementById('quizCard'), resultCard=document.getElementById('resultCard');
const reviewCard=document.getElementById('reviewCard'), scoreLine=document.getElementById('scoreLine');
const correctCountEl=document.getElementById('correctCount'), wrongCountEl=document.getElementById('wrongCount');
const unattCountEl=document.getElementById('unattCount'), scorePctEl=document.getElementById('scorePct');
const timeUsedEl=document.getElementById('timeUsed'), reviewList=document.getElementById('reviewList');

let current=1;
let selections=Array(TOTAL_QUESTIONS).fill(null);
let submitted=false;

qTotalEl.textContent=TOTAL_QUESTIONS;
renderQuestion();

prevBtn.onclick=()=>{ if(current>1){ current--; renderQuestion(); } };
nextBtn.onclick=()=>{ if(current<TOTAL_QUESTIONS){ current++; renderQuestion(); } };
clearBtn.onclick=()=>{ selections[current-1]=null; renderQuestion(); updateProgress(); };
submitBtn.onclick=submitQuiz;

function renderQuestion(){
  const q=questions[current-1];
  qNoEl.textContent=current;
  qTextEl.textContent=q.q;
  optionsEl.innerHTML='';
  q.options.forEach((opt,idx)=>{
    const div=document.createElement('div');
    div.className='opt'+(selections[current-1]===idx?' selected':'');
    div.innerHTML=`<b>${String.fromCharCode(65+idx)}.</b> ${opt}`;
    div.onclick=()=>{ selections[current-1]=idx; renderQuestion(); updateProgress(); };
    optionsEl.appendChild(div);
  });
  prevBtn.disabled=current===1;
  nextBtn.disabled=current===TOTAL_QUESTIONS;
}
function updateProgress(){
  const attempted=selections.filter(x=>x!==null).length;
  progressPill.textContent=`рдкреНрд░рдпрд╛рд╕рд┐рдд: ${attempted}`;
}

/* ========== TIMER ========== */
let totalSeconds=QUIZ_MINUTES*60, elapsed=0;
const t=setInterval(()=>{
  if(submitted){ clearInterval(t); return; }
  if(totalSeconds<=0){ timerEl.textContent='00:00'; autoSubmitOnTime(); clearInterval(t); return; }
  totalSeconds--; elapsed++;
  const mm=String(Math.floor(totalSeconds/60)).padStart(2,'0');
  const ss=String(totalSeconds%60).padStart(2,'0');
  timerEl.textContent=`${mm}:${ss}`;
},1000);

function autoSubmitOnTime(){
  if(!submitted){ alert('рд╕рдордп рд╕рдорд╛рдкреНрдд! рдЯреЗрд╕реНрдЯ рд╕реНрд╡рддрдГ рдЬрдорд╛ рд╣реЛ рд░рд╣рд╛ рд╣реИред'); submitQuiz(); }
}

/* ========== SUBMIT & REVIEW ========== */
function submitQuiz(){
  if(submitted) return;
  submitted=true;
  prevBtn.disabled=true; nextBtn.disabled=true; clearBtn.disabled=true; submitBtn.disabled=true;

  let correct=0, wrong=0, unatt=0;
  selections.forEach((sel,i)=>{
    if(sel===null){ unatt++; return; }
    const ans=questions[i].answerIndex;
    if(sel===ans) correct++; else wrong++;
  });

  const scorePct=Math.round((correct/TOTAL_QUESTIONS)*100);
  const tu_m=Math.floor(elapsed/60);
  const tu_s=String(elapsed%60).padStart(2,'0');

  scoreLine.innerHTML=`рдЖрдкрдХрд╛ рд╕реНрдХреЛрд░: <b>${correct}/${TOTAL_QUESTIONS}</b> тАФ <span class="${scorePct>=60?'correct':'wrong'}">${scorePct}%</span>`;
  correctCountEl.textContent=correct; wrongCountEl.textContent=wrong; unattCountEl.textContent=unatt;
  scorePctEl.textContent=scorePct; timeUsedEl.textContent=`${tu_m}:${tu_s}`;

  quizCard.style.display='none';
  resultCard.style.display='block';
  reviewCard.style.display='block';

  reviewList.innerHTML='';
  questions.forEach((q,i)=>{
    const div=document.createElement('div'); div.className='item';
    const userSel=selections[i];
    const isCorrect=userSel===q.answerIndex;
    let ansText='';
    if(userSel===null){
      ansText=`тЭМ рдЪрдпрдирд┐рдд рдЙрддреНрддрд░: <span class="wrong">рдХреЛрдИ рдирд╣реАрдВ</span>`;
    } else if(isCorrect){
      ansText=`тЬЕ рдЖрдкрдХрд╛ рдЙрддреНрддрд░: <span class="correct">${q.options[userSel]}</span>`;
    } else {
      ansText=`тЭМ рдЖрдкрдХрд╛ рдЙрддреНрддрд░: <span class="wrong">${q.options[userSel]}</span> | рд╕рд╣реА рдЙрддреНрддрд░: <span class="correct">${q.options[q.answerIndex]}</span>`;
    }
    div.innerHTML=`
      <b>рдкреНрд░. ${i+1}.</b> ${q.q}<br>
      <div class="ans">${ansText}</div>
      <details><summary>ЁЯФО рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг</summary>${q.explanation}</details>
    `;
    reviewList.appendChild(div);
  });
}
</script>
</body>
</html>

